created: 20230328132240962
creator: Gezi
list: {{||$:/core/ui/TagTemplate}}
modified: 20241006094322924
modifier: Gezi-lzq
tags: 并发
title: ABA问题
type: text/vnd.tiddlywiki

<<<.tc-big-quote
在多线程计算中，ABA问题在同步过程中发生，当一个位置被读取两次，两次读取具有相同的值，“值相同”用于表示“没有改变”。然而，另一个线程可以在两次读取之间执行，改变该值，做其他工作，然后再将该值改回来，从而欺骗第一个线程认为“没有改变”，即使第二个线程做出违反此假设的工作。
<<< 

归结起来，构成 ABA 问题有三个重要的条件：

1. 某个线程需要重复读某个内存地址，并以内存地址的值变化作为该值是否变化的唯一判定依据；

2. 重复读取的变量会被多线程共享，且存在『值回退』的可能，即值变化后有可能因为某个操作复归原值；

3. 在多次读取间隔中，开发者没有采取有效的同步手段，比如上锁。