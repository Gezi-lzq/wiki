created: 20230217074125348
creator: Gezi
modified: 20230217092950714
modifier: Gezi
tags: Redis-简单动态字符串
title: SDS的二进制安全
type: text/vnd.tiddlywiki

!! 二进制安全

由于C字符串未保留长度，仅仅根据结尾的`\0`空字符来确定结尾，所以在读入一些特殊数据格式时，可能会出现遗漏。

为了确保Redis可以适用于各种不同的场景，SDS的API是二进制安全的(binary-safe)：//所有 SDS API 都会以处理二进制的方式来处理 SDS 存放在 buf 数组里的数据， 程序不会对其中的数据做任何限制、过滤、或者假设 —— 数据在写入时是什么样的， 它被读取时就是什么样。//

也是我们将 SDS 的 buf 属性称为字节数组的原因，可以用它来保存一系列二进制数据，而不只是保存字符。

SDS 来保存之前提到的特殊数据格式就没有任何问题， 因为 SDS 使用 len 属性的值而不是空字符来判断字符串是否结束。