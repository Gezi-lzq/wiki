created: 20230326063237915
creator: Gezi
modified: 20230326065333880
modifier: Gezi
tags: 长连接网关设计
title: 网络请求的扇出
type: text/vnd.tiddlywiki

在点对点聊天中，一个用户可能有多个设备登录，每个设备都会建立长连接，并分布在不同的网关机器上。在下发消息时，业务服务需要同时下发消息给多个网关机器来处理，产生了多个rpc请求，这就是网络请求的扇出。

在群聊中，一个群内有数百人，而这些人所对应的长连接也分布在不同的网关机器上。每次发送一条消息都要下发给多个网关机器处理，因此会产生大量的rpc请求，形成了更广泛的网络请求扇出。

