created: 20230313080509693
creator: Gezi
modified: 20230313082157348
modifier: Gezi
tags: IM系统-plato
title: 收件箱与发件箱
type: text/vnd.tiddlywiki

!!! ''收件箱 与 写放大''

每个用户有自己的收件箱，系统将该用户需要收到的信息存入其收件队列中，当用户A上线后会将用户A的收件箱内的消息推送给用户。

当一个2000人群聊，其中一个人发送了消息，则会把该消息写入1999个人的收件队列内，形成''写放大''。写操作的复杂度与用户数量成正比，读操作的复杂度为常量。

!!! ''发件箱 与 读放大''

每个用户具有自己的发件箱，用户A 给 用户D 发送的消息，保存在用户A自己的发件箱内。当用户D上线后，他需要把从他的好友A B C的收件箱中，拉取发送给自己的消息。

若用户A有1000个好友，当他上线后，需要读1000个发件箱查看是否有发送给自己的消息，形成''读放大''，读操作的复杂度与用户数量成正比，写操作的复杂度为常量。